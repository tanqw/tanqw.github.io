<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="设计模式, Tan">
    <meta name="description" content="Justice may be late, but will never be absent.">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>设计模式 | Tan</title>
    <link rel="icon" type="image/png" href="https://cdn.jsdelivr.net/gh/tanqw/tanqw.github.io/favicon.png">

    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/tanqw/tanqw.github.io/libs/awesome/css/all.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/tanqw/tanqw.github.io/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/tanqw/tanqw.github.io/libs/aos/aos.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/tanqw/tanqw.github.io/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/tanqw/tanqw.github.io/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/tanqw/tanqw.github.io/css/matery.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/tanqw/tanqw.github.io/css/my.min.css">

    <script src="https://cdn.jsdelivr.net/gh/tanqw/tanqw.github.io/libs/jquery/jquery.min.js"></script>

<meta name="generator" content="Hexo 5.4.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
<link rel="alternate" href="/atom.xml" title="Tan" type="application/atom+xml">
<link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"></head>



   <style>
    body{
       background-image: url(https://cdn.jsdelivr.net/gh/Tokisaki-Galaxy/res/site/medias/background.jpg);
       background-repeat:no-repeat;
       background-size:cover;
       background-attachment:fixed;
    }
</style>



<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
            <div id="navContainer" class="nav-wrapper container">
                
                    <div class="weather">
                        <div id="tp-weather-widget"></div>
                        <script>
                        (function(a,h,g,f,e,d,c,b){b=function(){d=h.createElement(g);c=h.getElementsByTagName(g)[0];d.src=e;d.charset="utf-8";d.async=1;c.parentNode.insertBefore(d,c)};a["SeniverseWeatherWidgetObject"]=f;a[f]||(a[f]=function(){(a[f].q=a[f].q||[]).push(arguments)});a[f].l=+new Date();if(a.attachEvent){a.attachEvent("onload",b)}else{a.addEventListener("load",b,false)}}(window,document,"script","SeniverseWeatherWidget","//cdn.sencdn.com/widget2/static/js/bundle.js?t="+parseInt((new Date().getTime() / 100000000).toString(),10)));
                        window.SeniverseWeatherWidget('show', {
                            flavor: "slim",
                            location: "WX4FBXXFKE4F",
                            geolocation: true,
                            language: "zh-Hans",
                            unit: "c",
                            theme: "auto",
                            token: "efb760e3-5326-4f08-839b-122738249a17",
                            hover: "enabled",
                            container: "tp-weather-widget"
                        })
                        </script>
                    </div>
                     
                <div class="brand-logo">
                    <a href="/" class="waves-effect waves-light">
                        
                        <img src="https://cdn.jsdelivr.net/gh/tanqw/tanqw.github.io/medias/logo.png" class="logo-img" alt="LOGO">
                        
                        <span class="logo-span">Tan</span>
                    </a>
                </div>
                

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>标签</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>分类</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>归档</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>关于</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>友情链接</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="https://cdn.jsdelivr.net/gh/tanqw/tanqw.github.io/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">Tan</div>
        <div class="logo-desc">
            
            Justice may be late, but will never be absent.
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			标签
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			分类
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			归档
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			关于
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			友情链接
		</a>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/tanqw" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>


            </div>
    
            
                <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #1890ff ;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/tanqw" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
            

    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('https://cdn.jsdelivr.net/gh/tanqw/tanqw.github.io/medias/featureimages/17.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">设计模式</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/tanqw/tanqw.github.io/libs/tocbot/tocbot.min.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        padding: 35px 0 15px 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        padding-bottom: 30px;
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;

        position: absolute;
        right: 23.5vw;
        display: block;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 15px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">
                                <span class="chip bg-color">设计模式</span>
                            </a>
                        
                            <a href="/tags/%E7%AC%94%E8%AE%B0/">
                                <span class="chip bg-color">笔记</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" class="post-category">
                                设计模式
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2021-09-16
                </div>
                

                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-check fa-fw"></i>更新日期:&nbsp;&nbsp;
                    2021-09-30
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-file-word fa-fw"></i>文章字数:&nbsp;&nbsp;
                    14.6k
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-clock fa-fw"></i>阅读时长:&nbsp;&nbsp;
                    49 分
                </div>
                

                
            </div>
        </div>
        <hr class="clearfix">

        
        <!-- 是否加载使用自带的 prismjs. -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/tanqw/tanqw.github.io/libs/prism/prism.min.css">
        

        

        <div class="card-content article-card-content">
            <div id="articleContent">
                <blockquote>
<h1 id="设计模式学习笔记"><a href="#设计模式学习笔记" class="headerlink" title="设计模式学习笔记"></a>设计模式学习笔记</h1></blockquote>
<h3 id="知识点"><a href="#知识点" class="headerlink" title="知识点"></a>知识点</h3><ul>
<li><p>同一个类的不同对象的Hash Code不同</p>
</li>
<li><p>形容词用接口，名词用抽象类</p>
</li>
<li><p>设计模式常用的七大原则</p>
<ol>
<li><p><strong>单一职责原则：控制类的颗粒度大小、将对象解耦、提高其内聚性</strong></p>
<p><strong>基本介绍</strong></p>
<p>对类来说，即一个类应该只负责意向职责。</p>
<p><strong>注意事项和细节</strong></p>
<ol>
<li>降低类的复杂度，一个类只负责一项职责</li>
<li>提高类的可读性、可维护性</li>
<li>降低变更引起的风险</li>
<li>通常情况下，我们应当遵守单一职责原则，只有逻辑足够简单，才可以在代码级违反单一职责原则；只有类中方法数量足够少，可以在方法级别保持单一职责原则</li>
</ol>
</li>
<li><p><strong>接口隔离原则：要为各个类建立它们需要的专用接口</strong></p>
<p><strong>基本介绍</strong></p>
<p>客户端不应该依赖它不需要的接口，即一个类对另一个类的依赖应该建立在最小的接口上</p>
<p><strong>应传统方法的问题和使用接口隔离原则改进</strong></p>
<ol>
<li>类A通过接口interface1依赖类B，类C通过接口interfa1依赖类D，如果接口interface1对于类A和类C来说不是最小接口，那么类B和类D必须去实现他们不需要的方法</li>
<li>将接口interface1拆分为独立的几个接口，类A和类C分别与他们需要的接口建立依赖关系。也就是采用接口隔离原则</li>
<li>接口interface1中出现的方法，根据实际情况拆分为三个接口</li>
<li>代码实现</li>
</ol>
<p><img src="https://gitee.com/tan2511217211/PicBed/raw/master/images/image-20210829095930685.png" alt="image-20210829095930685"></p>
</li>
<li><p><strong>依赖倒转原则：要面向接口编程，不要面向实现编程</strong></p>
<ol>
<li>高层模块不应该依赖低层模块，二者都应该依赖其抽象</li>
<li>抽象不应该依赖细节，细节应该依赖抽象</li>
<li>依赖倒转（倒置）的中心思想是面向接口编程</li>
<li>依赖倒转原则是基于这样的设计理念：相对于细节的多变性，抽象的东西要稳定的多。以抽象为基础搭建的架构比以细节为基础的架构要稳的多。在Java中，抽象指的是接口或抽象类，细节就是具体的实现类</li>
<li>使用接口或抽象类的目的是制定好规范，而不涉及任何具体的操作，把展现细节的任务交给他们的实现类去完成</li>
</ol>
<p><img src="https://gitee.com/tan2511217211/PicBed/raw/master/images/image-20210829102317701.png" alt="image-20210829102317701.png"></p>
<p><img src="https://gitee.com/tan2511217211/PicBed/raw/master/images/image-20210829102400935.png" alt="image-20210829102400935"></p>
<p><img src="https://gitee.com/tan2511217211/PicBed/raw/master/images/image-20210829102515810.png" alt="image-20210829102515810"></p>
</li>
<li><p><strong>里氏替换原则：继承必须确保超类所拥有的性质在子类中仍然成立</strong></p>
<p><strong>OO中的继承性的思考和说明</strong></p>
<ol>
<li>继承包含这样一层含义：父类中凡是已经实现好的方法，实际上是在设定规范和契约，虽然它不强制要求所有的子类必须遵循这些契约，但是如果子类对这些已经实现的方法任意修改，就会对整个继承体系造成破坏。</li>
<li>继承在给程序设计带来便利的同时，也带来了弊端。比如原来使用继承会给其他程序带来侵入性，程序的可移植性降低，增加对象间的耦合性，如果一个类被其他的类所继承，则当这个类需要修改时，必须考虑到所有的子类，并且父类修改后，所有涉及到子类的功能都有可能产生故障。</li>
<li>问题提出：在编程中，如何正确的使用继承？——————————————————&gt;里氏替换原则</li>
</ol>
<p><strong>里氏替换原则基本介绍</strong></p>
<ol>
<li>里氏替换原则在1988年，有麻省理工学院的一位姓里的女士提出的。</li>
<li>如果对每个类型为T1的对象O1，都有类型为T2的对象O2，使得以T1定义的所有程序P在所有的对象O1都代换成O2时，程序P的行为没有发生变化，那么类型T2是类型T1的子类型。换句换说，所有引用基类的地方必须能透明地使用其子类的对象。</li>
<li>在使用继承时，遵循里氏替换原则，在子类中尽量不要重写父类的方法。</li>
<li>里氏替换原则告诉我们，继承实际上让两个类的耦合性增强了，在适当的情况下，可以通过聚合，组合，依赖来解决问题。</li>
</ol>
</li>
<li><p><strong>开闭原则(Open Closed Principle):对扩展开放，对修改关闭</strong></p>
<p><strong>基本介绍</strong></p>
<ol>
<li>是编程中最基础、最重要的设计原则</li>
<li>一个软件实体如类，模块和函数应该对扩展开放(对提供方)，对修改关闭(对使用方)。用抽象构建框架，用实现扩展细节</li>
<li>当软件需要变化时，尽量通过扩展软件实体的行为来实现变化，而不是通过修改已有的代码来实现变化</li>
<li>编程中遵循其它原则，以及使用设计模式的目的就是遵循开闭原则</li>
</ol>
</li>
<li><p><strong>迪米特法则：只跟你的直接朋友交谈，不跟“陌生人”说话</strong></p>
<p><strong>基本介绍</strong></p>
<ol>
<li>一个对象应该对其他对象保持最少的了解</li>
<li>类与类关系越密切，耦合度越大</li>
<li>迪米特法则(Demeter Principle)又叫最少知道原则，即一个类对自己依赖的类知道的越少越好。也就是说，对于被依赖的类不管多么复杂，都尽量将逻辑封装在类的内部。对外除了提供的public 方法，不对外泄露任何信息</li>
<li>迪米特法则还有个更简单的定义：只与直接的朋友通信</li>
<li>直接的朋友：每个对象都会与其他对象有耦合关系，只要两个对象之间有耦合关系，我们就说这两个对象之间是朋友关系。耦合的方式很多，依赖，关联，组合，聚合等。其中，我们称出现成员变量，方法参数，方法返回值中的类为直接的朋友，而出现在局部变量中的类不是直接的朋友。也就是说，陌生的类最好不要以局部变量的形式出现在类的内部</li>
</ol>
<p><strong>迪米特法则注意事项和细节</strong></p>
<ol>
<li>迪米特法则的核心是降低类之间的耦合</li>
<li>但是注意：由于每个类都减少了不必要的依赖，因此迪米特法则只是要求降低类间(对象间)耦合关系，并不是要求完全没有依赖关系</li>
</ol>
</li>
<li><p><strong>合成复用原则：尽量先使用组合或者聚合等关联关系来实现，其次才考虑使用继承关系来实现</strong></p>
<p><strong>基本介绍</strong></p>
<p>原则是尽量使用合成/聚合的方式，而不是使用继承</p>
<p><img src="https://gitee.com/tan2511217211/PicBed/raw/master/images/image-20210912221606552.png" alt="image-20210912221606552"></p>
</li>
</ol>
</li>
<li><p><strong>设计原则核心思想</strong></p>
<ol>
<li>找出应用中可能需要变化之处，把它们独立出来，不要和那些不需要变化的代码混在一起</li>
<li>针对接口编程，而不是针对实现编程</li>
<li>为了交互对象之间的松耦合设计而努力</li>
</ol>
</li>
<li><p><strong>UML基本介绍</strong></p>
<ol>
<li>UML(Unified modeling language UML) 统一建模语言，是一种用于软件系统分析和设计的语言工具，它用于帮助软件开发人员进行思考和记录思路的结果</li>
<li>UML本身是一套符号的规定，就像数学符号和化学符号一样，这些符号用于描述软件模型中的各个元素和他们之间的关系，比如类、接口、实现、泛化、依赖、组合、聚合等</li>
<li>使用UML来建模，常用的工具有Rational Rose , 也可以使用一些插件来建模</li>
</ol>
<p><strong>分类：</strong></p>
<ol>
<li>用例图(use case)</li>
<li>静态结构图：类图、对象图、包图、组件图、部署图</li>
<li>动态行为图：交互图（时序图与协作图）、状态图、活动图</li>
</ol>
</li>
<li><p>Spring MVC请求</p>
<p><img src="https://gitee.com/tan2511217211/PicBed/raw/master/images/image-20210930110535255.png" alt="image-20210930110535255"></p>
</li>
</ul>
<h3 id="设计模式类型"><a href="#设计模式类型" class="headerlink" title="设计模式类型"></a>设计模式类型</h3><ol>
<li><strong>创建型模式：</strong>单例模式、抽象工厂模式、原型模式、建造者模式、工厂模式。</li>
</ol>
<ol start="2">
<li>   <strong>结构型模式：</strong>适配器模式、桥接模式、装饰模式、组合模式、外观模式、享元模式、代理模式。</li>
<li>   <strong>行为型模式：</strong>模版方法模式、命令模式、访问者模式、迭代器模式、观察者模式、中介者模式、备忘录模式、解释器模式（Interpreter模式）、状态模式、策略模式、职责链模式(责任链模式)。</li>
</ol>
<h3 id="单例模式"><a href="#单例模式" class="headerlink" title="单例模式"></a>单例模式</h3><ul>
<li>单例：单个实例</li>
<li>应用场景：只需要一个实例存在（如：各种manager，各种factory等）</li>
<li>保证实例在内存中只有一个实例定义一个static final 实例 INSTANCE；例如（private static final Mgr01 INSTANCE = new Mgr01();）</li>
<li>注意：单例模式需要防止反序列化（Java的反射可以通过实例.class漏到内存中，然后再new一个实例出来，enum可以防止反序列化，能防止的原因是因为enum没有构造方法，就算拿到class文件也无法构造对象，它的反序列化返回的只是一个（INSTANCE）值）</li>
</ul>
<h3 id="策略模式"><a href="#策略模式" class="headerlink" title="策略模式"></a>策略模式</h3><ul>
<li><p>策略模式封装的是做一件事情时不同的执行方式</p>
<p><img src="https://gitee.com/tan2511217211/PicBed/raw/master/images/image-20210717181341796.png" alt="策略模式类图"></p>
</li>
</ul>
<h3 id="工厂模式"><a href="#工厂模式" class="headerlink" title="工厂模式"></a>工厂模式</h3><ul>
<li>工厂：任何可以产生对象的方法或类，都可以称之为工厂</li>
<li>单例也是一种工厂</li>
<li>为什么有了new之后，还要有工厂？<ul>
<li>灵活控制生产过程</li>
<li>权限、修饰、日志…</li>
</ul>
</li>
<li>工厂分类：<ol>
<li><p>简单工厂</p>
<p><strong>介绍：</strong></p>
<ol>
<li>简单工厂模式是属于创建型模式，是工厂模式的一种。简单工厂模式是由一个工厂对象决定创建出哪一种产品类的实例。简单工厂模式是工厂模式家族中最简单实用的模式</li>
</ol>
<ol start="2">
<li>   简单工厂模式：定义了一个创建对象的类，由这个类来封装实例化对象的行为(代码)</li>
<li>   在软件开发中，当我们会用到大量的创建某种、某类或者某批对象时，就会使用到工厂模式.</li>
</ol>
<p><img src="https://gitee.com/tan2511217211/PicBed/raw/master/images/image-20210920132453696.png" alt="image-20210920132453696"></p>
<p><img src="https://gitee.com/tan2511217211/PicBed/raw/master/images/image-20210920132657337.png" alt="image-20210920132657337"></p>
</li>
<li><p>静态工厂</p>
</li>
<li><p>工厂方法FactoryMethod</p>
<ul>
<li>产品维度扩展</li>
</ul>
<p><img src="https://gitee.com/tan2511217211/PicBed/raw/master/images/image-20210920132747104.png" alt="image-20210920132747104"></p>
</li>
<li><p>抽象工厂</p>
<p><strong>介绍：</strong></p>
<ol>
<li>抽象工厂模式：定义了一个interface用于创建相关或有依赖关系的对象簇，而无需指明具体的类</li>
</ol>
<ol start="2">
<li>   抽象工厂模式可以将简单工厂模式和工厂方法模式进行整合。</li>
<li>   从设计层面看，抽象工厂模式就是对简单工厂模式的改进(或者称为进一步的抽象)。</li>
<li>   将工厂抽象成两层，AbsFactory(抽象工厂) 和 具体实现的工厂子类。程序员可以根据创建对象类型使用对应的工厂子类。这样将单个的简单工厂类变成了工厂簇，更利于代码的维护和扩展。</li>
<li>   类图</li>
</ol>
<ul>
<li>产品一族扩展</li>
</ul>
<p><img src="https://gitee.com/tan2511217211/PicBed/raw/master/images/image-20210920132811213.png" alt="image-20210920132811213"></p>
<p><strong>工厂模式的意义：</strong></p>
<ol>
<li>将实例化对象的代码提取出来，放到一个类中统一管理和维护，达到和主项目的依赖关系的解耦。从而提高项目的扩展和维护性。</li>
<li>三种工厂模式 (简单工厂模式、工厂方法模式、抽象工厂模式)</li>
<li>设计模式的依赖抽象原则</li>
</ol>
<p><strong>注意事项：</strong></p>
<ul>
<li>创建对象实例时，不要直接 new 类, 而是把这个new 类的动作放在一个工厂的方法中，并返回。有的书上说，变量不要直接持有具体类的引用。</li>
<li>不要让类继承具体类，而是继承抽象类或者是实现interface(接口)</li>
<li>不要覆盖基类中已经实现的方法。</li>
</ul>
</li>
</ol>
</li>
</ul>
<h3 id="原型模式"><a href="#原型模式" class="headerlink" title="原型模式"></a>原型模式</h3><p><strong>介绍：</strong></p>
<ol>
<li>原型模式(Prototype模式)是指：用原型实例指定创建对象的种类，并且通过拷贝这些原型，创建新的对象</li>
</ol>
<ol start="2">
<li>   原型模式是一种创建型设计模式，允许一个对象再创建另外一个可定制的对象，无需知道如何创建的细节</li>
<li>   工作原理是:通过将一个原型对象传给那个要发动创建的对象，这个要发动创建的对象通过请求原型对象拷贝它们自己来实施创建，即 对象.clone()</li>
<li>   形象的理解：孙大圣拔出猴毛，变出其它孙大圣</li>
</ol>
<p><img src="https://gitee.com/tan2511217211/PicBed/raw/master/images/image-20210921111815387.png" alt="image-20210921111815387"></p>
<ul>
<li>Prototype : 原型类，声明一个克隆自己的接口</li>
<li>ConcretePrototype: 具体的原型类, 实现一个克隆自己的操作</li>
<li>Client: 让一个原型对象克隆自己，从而创建一个新的对象(属性一样)</li>
</ul>
<p><strong>浅拷贝：</strong></p>
<ul>
<li>对于数据类型是基本数据类型的成员变量，浅拷贝会直接进行值传递，也就是将该属性值复制一份给新的对象。</li>
</ul>
<ol start="2">
<li>   对于数据类型是引用数据类型的成员变量，比如说成员变量是某个数组、某个类的对象等，那么浅拷贝会进行引用传递，也就是只是将该成员变量的引用值（内存地址）复制一份给新的对象。因为实际上两个对象的该成员变量都指向同一个实例。在这种情况下，在一个对象中修改该成员变量会影响到另一个对象的该成员变量值</li>
<li>   前面我们克隆羊就是浅拷贝</li>
</ol>
<ul>
<li>浅拷贝是使用默认的clone()方法来实现sheep = (Sheep) super.clone();</li>
</ul>
<p><strong>深拷贝：</strong></p>
<ul>
<li>复制对象的所有基本数据类型的成员变量值</li>
</ul>
<ol start="2">
<li>   为所有引用数据类型的成员变量申请存储空间，并复制每个引用数据类型成员变量所引用的对象，直到该对象可达的所有对象。也就是说，对象进行深拷贝要对整个对象进行拷贝</li>
<li>   深拷贝实现方式1：重写clone方法来实现深拷贝</li>
<li>   深拷贝实现方式2：通过对象序列化实现深拷贝(推荐)</li>
</ol>
<p><strong>原型模式的注意事项和细节：</strong></p>
<ul>
<li>创建新的对象比较复杂时，可以利用原型模式简化对象的创建过程，同时也能够提高效率</li>
</ul>
<ol start="2">
<li>   不用重新初始化对象，而是动态地获得对象运行时的状态</li>
<li>   如果原始对象发生变化(增加或者减少属性)，其它克隆对象的也会发生相应的变化，无需修改代码</li>
<li>   在实现深克隆的时候可能需要比较复杂的代码</li>
<li>   缺点：需要为每一个类配备一个克隆方法，这对全新的类来说不是很难，但对已有的类进行改造时，需要修改其源代码，违背了ocp原则。</li>
</ol>
<h3 id="建造者模式"><a href="#建造者模式" class="headerlink" title="建造者模式"></a>建造者模式</h3><ul>
<li><p><strong>建造者模式介绍：</strong></p>
<ol>
<li>建造者模式（Builder Pattern）又叫生成器模式，是一种对象构建模式。它可以将复杂对象的建造过程抽象出来（抽象类别），使这个抽象过程的不同实现方法可以构造出不同表现（属性）的对象。</li>
</ol>
<ol start="2">
<li>   建造者模式是一步一步创建一个复杂的对象，它允许用户只通过指定复杂对象的类型和内容就可以构建它们，用户不需要知道内部的具体构建细节。</li>
</ol>
</li>
<li><p><strong>建造者模式的四个角色：</strong></p>
<ol>
<li>Product（产品角色）：一个具体的产品对象。</li>
</ol>
<ol start="2">
<li>   Builder（抽象建造者）：创建一个Product对象的各个部件指定的接口/抽象类。</li>
<li>   ConcreteBuilder（具体建造者）：实现接口，构建和装配各个部件。</li>
<li>   Director（指挥者）：构建一个使用Builder接口的对象。它主要是用于创建一个复杂的对象。它主要有两个作用，一是：隔离了客户与对象的生产过程，二是：负责控制产品对象的生产过程。</li>
</ol>
<p><img src="https://gitee.com/tan2511217211/PicBed/raw/master/images/image-20210921203121854.png" alt="image-20210921203121854"></p>
</li>
<li><p><strong>建造者模式的注意事项和细节：</strong></p>
<ol>
<li>客户端(使用程序)不必知道产品内部组成的细节，将产品本身与产品的创建过程解耦，使得相同的创建过程可以创建不同的产品对象</li>
<li>每一个具体建造者都相对独立，而与其他的具体建造者无关，因此可以很方便地替换具体建造者或增加新的具体建造者，用户使用不同的具体建造者即可得到不同的产品对象</li>
<li>可以更加精细地控制产品的创建过程。将复杂产品的创建步骤分解在不同的方法中，使得创建过程更加清晰，也更方便使用程序来控制创建过程</li>
<li>增加新的具体建造者无须修改原有类库的代码，指挥者类针对抽象建造者类编程，系统扩展方便，符合“开闭原则”</li>
<li>建造者模式所创建的产品一般具有较多的共同点，其组成部分相似，如果产品之间的差异性很大，则不适合使用建造者模式，因此其使用范围受到一定的限制。</li>
<li>如果产品的内部变化复杂，可能会导致需要定义很多具体建造者类来实现这种变化，导致系统变得很庞大，因此在这种情况下，要考虑是否选择建造者模式.</li>
<li>抽象工厂模式VS建造者模式<br>抽象工厂模式实现对产品家族的创建，一个产品家族是这样的一系列产品：具有不同分类维度的产品组合，采用抽象工厂模式不需要关心构建过程，只关心什么产品由什么工厂生产即可。而建造者模式则是要求按照指定的蓝图建造产品，它的主要目的是通过组装零配件而产生一个新产品</li>
</ol>
</li>
</ul>
<h3 id="适配器模式"><a href="#适配器模式" class="headerlink" title="适配器模式"></a>适配器模式</h3><ul>
<li><p><strong>适配器模式基本介绍</strong></p>
<ol>
<li>适配器模式(Adapter Pattern)将某个类的接口转换成客户端期望的另一个接口表示，主的目的是兼容性，让原本因接口不匹配不能一起工作的两个类可以协同工作。其别名为包装器(Wrapper)</li>
<li>适配器模式属于结构型模式</li>
<li>主要分为三类：类适配器模式、对象适配器模式、接口适配器模式</li>
</ol>
</li>
<li><p><strong>适配器模式工作原理</strong></p>
<ol>
<li>适配器模式：将一个类的接口转换成另一种接口.让原本接口不兼容的类可以兼容</li>
</ol>
<ol start="2">
<li>   从用户的角度看不到被适配者，是解耦的</li>
<li>   用户调用适配器转化出来的目标接口方法，适配器再调用被适配者的相关接口方法</li>
<li>   用户收到反馈结果，感觉只是和目标接口交互，如图</li>
</ol>
<p><img src="https://gitee.com/tan2511217211/PicBed/raw/master/images/image-20210922211015198.png" alt="image-20210922211013143"></p>
</li>
<li><p><strong>类适配器模式：</strong></p>
<ul>
<li><p>基本介绍：</p>
<p>Adapter类，通过继承src类，实现dst 类接口，完成src-&gt;dst的适配</p>
</li>
<li><p>类适配器模式注意事项和细节：</p>
<ol>
<li>Java是单继承机制，所以类适配器需要继承src类这一点算是一个缺点, 因为这要求dst必须是接口，有一定局限性;</li>
</ol>
<ol start="2">
<li>   src类的方法在Adapter中都会暴露出来，也增加了使用的成本。</li>
<li>   由于其继承了src类，所以它可以根据需求重写src类的方法，使得Adapter的灵活性增强了。</li>
</ol>
</li>
</ul>
</li>
<li><p><strong>对象适配器模式</strong></p>
<ul>
<li>基本介绍<ol>
<li>基本思路和类的适配器模式相同，只是将Adapter类作修改，不是继承src类，而是持有src类的实例，以解决兼容性的问题。 即：持有 src类，实现 dst 类接口，完成src-&gt;dst的适配</li>
</ol>
<ol start="2">
<li>   根据“合成复用原则”，在系统中尽量使用关联关系来替代继承关系。</li>
<li>   对象适配器模式是适配器模式常用的一种</li>
</ol>
</li>
<li>对象适配器模式注意事项和细节<ol>
<li>对象适配器和类适配器其实算是同一种思想，只不过实现方式不同。根据合成复用原则，使用组合替代继承， 所以它解决了类适配器必须继承src的局限性问题，也不再要求dst必须是接口。</li>
</ol>
<ol start="2">
<li>   使用成本更低，更灵活。</li>
</ol>
</li>
</ul>
</li>
<li><p><strong>接口适配器模式</strong></p>
<ul>
<li>基本介绍<ol>
<li>一些书籍称为：适配器模式(Default Adapter Pattern)或缺省适配器模式。</li>
</ol>
<ol start="2">
<li>   当不需要全部实现接口提供的方法时，可先设计一个抽象类实现接口，并为该接口中每个方法提供一个默认实现（空方法），那么该抽象类的子类可有选择地覆盖父类的某些方法来实现需求</li>
<li>   适用于一个接口不想使用其所有的方法的情况。</li>
</ol>
</li>
<li>适配器模式的注意事项和细节<ol>
<li>   三种命名方式，是根据 src是以怎样的形式给到Adapter（在Adapter里的形式）来命名的。</li>
</ol>
<ol start="2">
<li>类适配器：以类给到，在Adapter里，就是将src当做类，继承对象适配器：以对象给到，在Adapter里，将src作为一个对象，持有接口适配器：以接口给到，在Adapter里，将src作为一个接口，实现</li>
</ol>
<ol start="3">
<li>   Adapter模式最大的作用还是将原本不兼容的接口融合在一起工作。</li>
</ol>
</li>
</ul>
</li>
</ul>
<h3 id="桥接模式"><a href="#桥接模式" class="headerlink" title="桥接模式"></a>桥接模式</h3><ul>
<li>基本介绍<ol>
<li>桥接模式(Bridge模式)是指：将实现与抽象放在两个不同的类层次中，使两个层次可以独立改变。</li>
</ol>
<ol start="2">
<li>   是一种结构型设计模式</li>
</ol>
<ol start="3">
<li>Bridge模式基于类的最小设计原则，通过使用封装、聚合及继承等行为让不同的类承担不同的职责。它的主要特点是把抽象(Abstraction)与行为实现(Implementation)分离开来，从而可以保持各部分的独立性以及应对他们的功能扩展</li>
</ol>
</li>
<li>原理类图</li>
</ul>
<p><img src="https://gitee.com/tan2511217211/PicBed/raw/master/images/image-20210923142733407.png" alt="image-20210923142731463"></p>
<ul>
<li><p>原理类图说明</p>
<ol>
<li>Client类：桥接模式的调用者</li>
</ol>
<ol start="2">
<li>   抽象类(Abstraction) :维护了 Implementor / 即它的实现类ConcreteImplementorA.., 二者是聚合关系, Abstraction 充当桥接类</li>
</ol>
<ol start="3">
<li>RefinedAbstraction：是Abstraction抽象类的子类</li>
<li>Implementor：行为实现类的接口</li>
<li>ConcreteImplementorA/B：行为的具体实现类</li>
<li>从UML图看出：这里的抽象类和接口是聚合关系，其实也是调用和被调用的关系</li>
</ol>
</li>
<li><p>桥接模式的注意事项和细节</p>
<ol>
<li>实现了抽象和实现部分的分离，从而极大的提供了系统的灵活性，让抽象部分和实现部分独立开来，这有助于系统进行分层设计，从而产生更好的结构化系统。</li>
</ol>
<ol start="2">
<li>   对于系统的高层部分，只需要知道抽象部分和实现部分的接口就可以了，其它的部分由具体业务来完成。</li>
<li>   桥接模式替代多层继承方案，可以减少子类的个数，降低系统的管理和维护成本。</li>
<li>   桥接模式的引入增加了系统的理解和设计难度，由于聚合关联关系建立在抽象层，要求开发者针对抽象进行设计和编程</li>
<li>   桥接模式要求正确识别出系统中两个独立变化的维度，因此其使用范围有一定的局限性，即需要有这样的应用场景。</li>
</ol>
</li>
<li><p>桥接模式其它应用场景</p>
<ol>
<li><p>对于那些不希望使用继承或因为多层次继承导致系统类的个数急剧增加的系统，桥接模式尤为适用.</p>
</li>
<li><p>常见的应用场景:</p>
<ul>
<li><p>JDBC驱动程序</p>
</li>
<li><p>银行转账系统<br>转账分类: 网上转账，柜台转账，AMT转账<br>转账用户类型：普通用户，银卡用户，金卡用户..</p>
</li>
<li><p>消息管理<br>消息类型：即时消息，延时消息<br>消息分类：手机短信，邮件消息，QQ消息…</p>
</li>
</ul>
</li>
</ol>
</li>
</ul>
<h3 id="装饰器模式"><a href="#装饰器模式" class="headerlink" title="装饰器模式"></a>装饰器模式</h3><ul>
<li><p>基本介绍</p>
<p>装饰者模式：动态的将新功能附加到对象上。在对象功能扩展方面，它比继承更有弹性，装饰者模式也体现了开闭原则(ocp)</p>
</li>
<li><p>装饰者模式(Decorator)原理</p>
<ol>
<li>装饰者模式就像打包一个快递<ul>
<li>主体：比如：陶瓷、衣服 (Component) // 被装饰者</li>
<li>包装：比如：报纸填充、塑料泡沫、纸板、木板(Decorator)</li>
</ul>
</li>
<li>Component<ul>
<li>主体：比如类似前面的Drink</li>
</ul>
</li>
<li>ConcreteComponent和Decorator ConcreteComponent：<ul>
<li>具体的主体，比如前面的各个单品咖啡</li>
<li>Decorator: 装饰者，比如各调料</li>
</ul>
</li>
<li>在如图的Component与ConcreteComponent之间，如果ConcreteComponent类很多,还可以设计一个缓冲层，将共有的部分提取出来，抽象层一个类。</li>
</ol>
</li>
</ul>
<h3 id="组合模式"><a href="#组合模式" class="headerlink" title="组合模式"></a>组合模式</h3><ul>
<li>基本介绍<ol>
<li>组合模式（Composite Pattern），又叫部分整体模式，它创建了对象组的树形结构，将对象组合成树状结构以表示“整体-部分”的层次关系。</li>
</ol>
<ol start="2">
<li>   组合模式依据树形结构来组合对象，用来表示部分以及整体层次。</li>
<li>   这种类型的设计模式属于结构型模式。</li>
<li>   组合模式使得用户对单个对象和组合对象的访问具有一致性，即：组合能让客户以一致的方式处理个别对象以及组合对象</li>
</ol>
</li>
<li>组合模式原理类图</li>
</ul>
<p><img src="https://gitee.com/tan2511217211/PicBed/raw/master/images/image-20210925133818552.png" alt="image-20210925133818552"></p>
<p><strong>对原理结构图的说明-即(组合模式的角色及职责)</strong></p>
<ol>
<li>Component :这是组合中对象声明接口，在适当情况下，实现所有类共有的接口默认行为,用于访问和管理Component子部件,Component可以是抽象类或者接口</li>
<li>Leaf:在组合中表示叶子节点，叶子节点没有子节点</li>
<li>Composite :非叶子节点，用于存储子部件，在Component接口中实现子部件的相关操作，比如增加(add),删除。</li>
</ol>
<p><strong>组合模式解决的问题</strong></p>
<ol>
<li>   组合模式解决这样的问题，当我们的要处理的对象可以生成一颗树形结构，而我们要对树上的节点和叶子进行操作时，它能够提供一致的方式，而不用考虑它是节点还是叶子</li>
<li>   对应的示意图</li>
</ol>
<p><img src="https://gitee.com/tan2511217211/PicBed/raw/master/images/image-20210925134428999.png" alt="image-20210925134428999"></p>
<p><strong>组合模式的注意事项和细节</strong></p>
<ol>
<li>   简化客户端操作。客户端只需要面对一致的对象而不用考虑整体部分或者节点叶子的问题。</li>
<li>   具有较强的扩展性。当我们要更改组合对象时，我们只需要调整内部的层次关系，客户端不用做出任何改动.</li>
<li>   方便创建出复杂的层次结构。客户端不用理会组合里面的组成细节，容易添加节点或者叶子从而创建出复杂的树形结构</li>
<li>   需要遍历组织机构，或者处理的对象具有树形结构时, 非常适合使用组合模式.</li>
<li>   要求较高的抽象性，如果节点和叶子有很多差异性的话，比如很多方法和属性都不一样，不适合使用组合模式</li>
</ol>
<h3 id="外观模式"><a href="#外观模式" class="headerlink" title="外观模式"></a>外观模式</h3><ul>
<li>基本介绍<ol>
<li>外观模式（Facade），也叫“过程模式：外观模式为子系统中的一组接口提供一个一致的界面，此模式定义了一个高层接口，这个接口使得这一子系统更加容易使用</li>
</ol>
<ol start="2">
<li>   外观模式通过定义一个一致的接口，用以屏蔽内部子系统的细节，使得调用端只需跟这个接口发生调用，而无需关心这个子系统的内部细节</li>
</ol>
</li>
<li>外观模式原理类图</li>
</ul>
<p><img src="https://gitee.com/tan2511217211/PicBed/raw/master/images/image-20210925171816732.png" alt="image-20210925171816732"></p>
<p><strong>原理类图的说明(外观模式的角色)</strong></p>
<ol>
<li>外观类(Facade): 为调用端提供统一的调用接口, 外观类知道哪些子系统负责处理请求,从而将调用端的请求代理给适当子系统对象</li>
<li>调用者(Client): 外观接口的调用者</li>
<li>子系统的集合：指模块或者子系统，处理Facade 对象指派的任务，他是功能的实际提供者</li>
</ol>
<p><strong>外观模式的注意事项和细节</strong></p>
<ol>
<li>外观模式对外屏蔽了子系统的细节，因此外观模式降低了客户端对子系统使用的复杂性</li>
</ol>
<ol start="2">
<li>   外观模式对客户端与子系统的耦合关系，让子系统内部的模块更易维护和扩展</li>
<li>   通过合理的使用外观模式，可以帮我们更好的划分访问的层次</li>
<li>   当系统需要进行分层设计时，可以考虑使用Facade模式</li>
<li>   在维护一个遗留的大型系统时，可能这个系统已经变得非常难以维护和扩展，此时可以考虑为新系统开发一个Facade类，来提供遗留系统的比较清晰简单的接口，让新系统与Facade类交互，提高复用性</li>
<li>   不能过多的或者不合理的使用外观模式，使用外观模式好，还是直接调用模块好。要以让系统有层次，利于维护为目的。</li>
</ol>
<h3 id="享元模式"><a href="#享元模式" class="headerlink" title="享元模式"></a>享元模式</h3><ul>
<li>基本介绍<ol>
<li>享元模式（Flyweight Pattern）也叫蝇量模式: 运用共享技术有效地支持大量细粒度的对象</li>
</ol>
<ol start="2">
<li>   常用于系统底层开发，解决系统的性能问题。像数据库连接池，里面都是创建好的连接对象，在这些连接对象中有我们需要的则直接拿来用，避免重新创建，如果没有我们需要的，则创建一个</li>
<li>   享元模式能够解决重复对象的内存浪费的问题，当系统中有大量相似对象，需要缓冲池时。不需总是创建新对象，可以从缓冲池里拿。这样可以降低系统内存，同时提高效率</li>
<li>   享元模式经典的应用场景就是池技术了，String常量池、数据库连接池、缓冲池等等都是享元模式的应用，享元模式是池技术的重要实现方式</li>
</ol>
</li>
<li>享元模式的原理类图</li>
</ul>
<p><img src="https://gitee.com/tan2511217211/PicBed/raw/master/images/image-20210926094451719.png" alt="image-20210926094451719"></p>
<p><strong>对原理图的说明-即(模式的角色及职责)</strong></p>
<ol>
<li>FlyWeighit 是抽象的享元角色，他是产品的抽象类,同时定义出对象的外部状态和内部状态(后面介绍)的接口或实现</li>
<li>ConcreteFlyWeight是具体的享元角色，是具体的产品类，实现抽象角色定义相关业务</li>
<li>UnSharedConcreteFlyWeight是不可共享的角色，一般不会出现在享元工厂</li>
<li>FlyWeightFactory享元工厂类，用于构建一个池容器(集合)，同时提供从池中获取对象方法</li>
</ol>
<p><strong>内部状态和外部状态</strong></p>
<p>比如围棋、五子棋、跳棋，它们都有大量的棋子对象，围棋和五子棋只有黑白两色，跳棋颜色多一点，所以棋子颜色就是棋子的内部状态；而各个棋子之间的差别就是位置的不同，当我们落子后，落子颜色是定的，但位置是变化的，所以棋子坐标就是棋子的外部状态</p>
<ol>
<li>享元模式提出了两个要求：细粒度和共享对象。这里就涉及到内部状态和外部状态了，即将对象的信息分为两个部分：内部状态和外部状态</li>
</ol>
<ol start="2">
<li>   内部状态指对象共享出来的信息，存储在享元对象内部且不会随环境的改变而改变</li>
<li>   外部状态指对象得以依赖的一个标记，是随环境改变而改变的、不可共享的状态</li>
<li>   举个例子：围棋理论上有361个空位可以放棋子，每盘棋都有可能有两三百个棋子对象产生，因为内存空间有限，一台服务器很难支持更多的玩家玩围棋游戏，如果用享元模式来处理棋子，那么棋子对象就可以减少到只有两个实例，这样就很好的解决了对象的开销问题</li>
</ol>
<p><strong>享元模式的注意事项和细节</strong></p>
<ol>
<li>在享元模式这样理解，“享”就表示共享，“元”表示对象</li>
</ol>
<ol start="2">
<li>   系统中有大量对象，这些对象消耗大量内存，并且对象的状态大部分可以外部化时，我们就可以考虑选用享元模式</li>
<li>   用唯一标识码判断，如果在内存中有，则返回这个唯一标识码所标识的对象，用HashMap/HashTable存储</li>
<li>   享元模式大大减少了对象的创建，降低了程序内存的占用，提高效率</li>
<li>   享元模式提高了系统的复杂度。需要分离出内部状态和外部状态，而外部状态具有固化特性，不应该随着内部状态的改变而改变，这是我们使用享元模式需要注意的地方.</li>
<li>   使用享元模式时，注意划分内部状态和外部状态，并且需要有一个工厂类加以控制</li>
<li>   享元模式经典的应用场景是需要缓冲池的场景，比如String常量池、数据库连接池</li>
</ol>
<h3 id="代理模式"><a href="#代理模式" class="headerlink" title="代理模式"></a>代理模式</h3><ul>
<li>基本介绍<ol>
<li>代理模式：为一个对象提供一个替身，以控制对这个对象的访问。即通过代理对象访问目标对象.这样做的好处是:可以在目标对象实现的基础上,增强额外的功能操作,即扩展目标对象的功能。</li>
</ol>
<ol start="2">
<li>   被代理的对象可以是远程对象、创建开销大的对象或需要安全控制的对象</li>
<li>   代理模式有不同的形式, 主要有三种 静态代理、动态代理 (JDK代理、接口代理)和 Cglib代理(可以在内存动态的创建对象，而不需要实现接口，他是属于动态代理的范畴) 。</li>
<li>   代理模式示意图</li>
</ol>
</li>
<li>静态代码模式的基本介绍</li>
</ul>
<p>静态代理在使用时,需要定义接口或者父类,被代理对象(即目标对象)与代理对象一起实现相同的接口或者是继承相同父类</p>
<ul>
<li>静态代理优缺点<ol>
<li>优点：在不修改目标对象的功能前提下, 能通过代理对象对目标功能扩展</li>
</ol>
<ol start="2">
<li>   缺点：因为代理对象需要与目标对象实现一样的接口,所以会有很多代理类</li>
<li>   一旦接口增加方法,目标对象与代理对象都要维护</li>
</ol>
</li>
<li>动态代理模式的基本介绍</li>
</ul>
<ol>
<li>代理对象,不需要实现接口，但是目标对象要实现接口，否则不能用动态代理</li>
</ol>
<ol start="2">
<li>   代理对象的生成，是利用JDK的API，动态的在内存中构建代理对象</li>
<li>   动态代理也叫做：JDK代理、接口代理</li>
</ol>
<ul>
<li>Cglib代理模式的基本介绍</li>
</ul>
<ol>
<li>静态代理和JDK代理模式都要求目标对象是实现一个接口,但是有时候目标对象只是一个单独的对象,并没有实现任何的接口,这个时候可使用目标对象子类来实现代理-这就是Cglib代理</li>
</ol>
<ol start="2">
<li>   Cglib代理也叫作子类代理,它是在内存中构建一个子类对象从而实现对目标对象功能扩展, 有些书也将Cglib代理归属到动态代理。</li>
<li>   Cglib是一个强大的高性能的代码生成包,它可以在运行期扩展java类与实现java接口.它广泛的被许多AOP的框架使用,例如Spring AOP，实现方法拦截</li>
</ol>
<ol start="4">
<li>在AOP编程中如何选择代理模式：<ol>
<li>目标对象需要实现接口，用JDK代理</li>
<li>目标对象不需要实现接口，用Cglib代理</li>
</ol>
</li>
</ol>
<ol start="5">
<li>   Cglib包的底层是通过使用字节码处理框架ASM来转换字节码并生成新的类</li>
</ol>
<ul>
<li>代理模式(Proxy)的变体</li>
</ul>
<ol>
<li><p><strong>防火墙代理</strong><br>内网通过代理穿透防火墙，实现对公网的访问。</p>
</li>
<li><p><strong>缓存代理</strong><br>比如：当请求图片文件等资源时，先到缓存代理取，如果取到资源则ok,如果取不到资源，再到公网或者数据库取，然后缓存。</p>
</li>
<li><p><strong>远程代理</strong><br>远程对象的本地代表，通过它可以把远程对象当本地对象来调用。远程代理通过网络和真正的远程对象沟通信息</p>
<p><img src="https://gitee.com/tan2511217211/PicBed/raw/master/images/image-20210926142008139.png" alt="image-20210926142008139"></p>
</li>
<li><p><strong>同步代理</strong></p>
<p>主要使用在多线程编程中，完成多线程间同步工作</p>
</li>
</ol>
<h3 id="模板方法模式"><a href="#模板方法模式" class="headerlink" title="模板方法模式"></a>模板方法模式</h3><ul>
<li>基本介绍<ol>
<li>模板方法模式（Template Method Pattern），又叫模板模式(Template Pattern)，z在一个抽象类公开定义了执行它的方法的模板。它的子类可以按需要重写方法实现，但调用将以抽象类中定义的方式进行</li>
</ol>
<ol start="2">
<li>   简单说，模板方法模式定义一个操作中的算法的骨架，而将一些步骤延迟到子类中，使得子类可以不改变一个算法的结构，就可以重定义该算法的某些特定步骤</li>
<li>   这种类型的设计模式属于行为型模式</li>
</ol>
</li>
<li>模板方法模式的原理类图</li>
</ul>
<p><img src="https://gitee.com/tan2511217211/PicBed/raw/master/images/image-20210928101823955.png" alt="image-20210928101823955"></p>
<p><strong>对原理类图的说明-即(模板方法模式的角色及职责)</strong></p>
<ol>
<li>AbstractClass 抽象类， 类中实现了模板方法(template)，定义了算法的骨架，具体子类需要去实现 其它的抽象方法operationr2,3,4</li>
</ol>
<ol start="2">
<li>   ConcreteClass 实现抽象方法operationr2,3,4, 以完成算法中特点子类的步骤</li>
</ol>
<ul>
<li>模板方法模式的注意事项和细节<ol>
<li>基本思想是：算法只存在于一个地方，也就是在父类中，容易修改。需要修改算法时，只要修改父类的模板方法或者已经实现的某些步骤，子类就会继承这些修改</li>
</ol>
<ol start="2">
<li>   实现了最大化代码复用。父类的模板方法和已实现的某些步骤会被子类继承而直接使用。</li>
<li>   既统一了算法，也提供了很大的灵活性。父类的模板方法确保了算法的结构保持不变，同时由子类提供部分步骤的实现。</li>
<li>   该模式的不足之处：每一个不同的实现都需要一个子类实现，导致类的个数增加，使得系统更加庞大</li>
<li>   一般模板方法都加上final关键字， 防止子类重写模板方法.</li>
<li>   模板方法模式使用场景：当要完成在某个过程，该过程要执行一系列步骤，这一系列的步骤基本相同，但其个别步骤在实现时可能不同，通常考虑用模板方法模式来处理</li>
</ol>
</li>
</ul>
<h3 id="命令模式"><a href="#命令模式" class="headerlink" title="命令模式"></a>命令模式</h3><ul>
<li><p>基本介绍</p>
<ol>
<li>命令模式（Command Pattern）：在软件设计中，我们经常需要向某些对象发送请求，但是并不知道请求的接收者是谁，也不知道被请求的操作是哪个，我们只需在程序运行时指定具体的请求接收者即可，此时，可以使用命令模式来进行设计</li>
<li>命名模式使得请求发送者与请求接收者消除彼此之间的耦合，让对象之间的调用关系更加灵活，实现解耦。</li>
<li>在命名模式中，会将一个请求封装为一个对象，以便使用不同参数来表示不同的请求(即命名)，同时命令模式也支持可撤销的操作。</li>
<li>通俗易懂的理解：将军发布命令，士兵去执行。其中有几个角色：将军（命令发布者）、士兵（命令的具体执行者）、命令(连接将军和士兵)。Invoker是调用者（将军），Receiver是被调用者（士兵）， MyCommand是命令，实现了Command接口，持有接收对象</li>
</ol>
</li>
<li><p>命令模式的原理类图</p>
</li>
</ul>
<p><img src="https://gitee.com/tan2511217211/PicBed/raw/master/images/image-20210928142323399.png" alt="image-20210928142323399"></p>
<ul>
<li>对原理类图的说明-即(命名模式的角色及职责)<ol>
<li>Invoker 是调用者角色</li>
</ol>
<ol start="2">
<li>   Command: 是命令角色，需要执行的所有命令都在这里，可以是接口或抽象类</li>
<li>   Receiver: 接受者角色，知道如何实施和执行一个请求相关的操作</li>
<li>   ConcreteCommand: 将一个接受者对象与一个动作绑定，调用接受者相应的操作，实现execute</li>
</ol>
</li>
<li>命令模式的注意事项和细节<ol>
<li>将发起请求的对象与执行请求的对象解耦。发起请求的对象是调用者，调用者只要调用命令对象的execute()方法就可以让接收者工作，而不必知道具体的接收者对象是谁、是如何实现的，命令对象会负责让接收者执行请求的动作，也就是说：” 请求发起者”和“请求执行者”之间的解耦是通过命令对象实现的，命令对象起到了纽带桥梁的作用。</li>
</ol>
<ol start="2">
<li>   容易设计一个命令队列。只要把命令对象放到列队，就可以多线程的执行命令</li>
<li>   容易实现对请求的撤销和重做</li>
<li>   命令模式不足：可能导致某些系统有过多的具体命令类，增加了系统的复杂度，这点在在使用的时候要注意</li>
<li>   空命令也是一种设计模式，它为我们省去了判空的操作。在上面的实例中，如果没有用空命令，我们每按下一个按键都要判空，这给我们编码带来一定的麻烦。</li>
<li>   命令模式经典的应用场景：界面的一个按钮都是一条命令、模拟CMD（DOS命令）订单的撤销/恢复、触发-反馈机制</li>
</ol>
</li>
</ul>
<h3 id="访问者模式"><a href="#访问者模式" class="headerlink" title="访问者模式"></a>访问者模式</h3><ul>
<li>基本介绍<ol>
<li>访问者模式（Visitor Pattern），封装一些作用于某种数据结构的各元素的操作，它可以在不改变数据结构的前提下定义作用于这些元素的新的操作。</li>
</ol>
<ol start="2">
<li>   主要将数据结构与数据操作分离，解决数据结构和操作耦合性问题</li>
<li>   访问者模式的基本工作原理是：在被访问的类里面加一个对外提供接待访问者的接口</li>
<li>   访问者模式主要应用场景是：需要对一个对象结构中的对象进行很多不同操作(这些操作彼此没有关联)，同时需要避免让这些操作”污染”这些对象的类，可以选用访问者模式解决</li>
</ol>
</li>
<li>访问者模式的原理类图</li>
</ul>
<p><img src="https://gitee.com/tan2511217211/PicBed/raw/master/images/image-20210928153304474.png" alt="image-20210928153304474"></p>
<ul>
<li>对原理类图的说明-即(访问者模式的角色及职责)<ol>
<li>Visitor 是抽象访问者，为该对象结构中的ConcreteElement的每一个类声明一个visit操作</li>
</ol>
<ol start="2">
<li>   ConcreteVisitor ：是一个具体的访问值 实现每个由Visitor 声明的操作，是每个操作实现的部分.</li>
<li>   ObjectStructure 能枚举它的元素， 可以提供一个高层的接口，用来允许访问者访问元素</li>
<li>   Element 定义一个accept 方法，接收一个访问者对象</li>
<li>   ConcreteElement 为具体元素，实现了accept 方法</li>
</ol>
</li>
<li>访问者模式的注意事项和细节<ul>
<li>优点<ol>
<li>访问者模式符合单一职责原则、让程序具有优秀的扩展性、灵活性非常高</li>
</ol>
<ol start="2">
<li>   访问者模式可以对功能进行统一，可以做报表、UI、拦截器与过滤器，适用于数据结构相对稳定的系统</li>
</ol>
</li>
<li>缺点<ol>
<li>具体元素对访问者公布细节，也就是说访问者关注了其他类的内部细节，这是迪米特法则所不建议的, 这样造成了具体元素变更比较困难</li>
</ol>
<ol start="2">
<li>   违背了依赖倒转原则。访问者依赖的是具体元素，而不是抽象元素</li>
<li>   因此，如果一个系统有比较稳定的数据结构，又有经常变化的功能需求，那么访问者模式就是比较合适的</li>
</ol>
</li>
</ul>
</li>
</ul>
<h3 id="迭代器模式"><a href="#迭代器模式" class="headerlink" title="迭代器模式"></a>迭代器模式</h3><ul>
<li>基本介绍<ol>
<li>迭代器模式（Iterator Pattern）是常用的设计模式，属于行为型模式</li>
</ol>
<ol start="2">
<li>   如果我们的集合元素是用不同的方式实现的，有数组，还有java的集合类，或者还有其他方式，当客户端要遍历这些集合元素的时候就要使用多种遍历方式，而且还会暴露元素的内部结构，可以考虑使用迭代器模式解决。</li>
<li>   迭代器模式，提供一种遍历集合元素的统一接口，用一致的方法遍历集合元素，不需要知道集合对象的底层表示，即：不暴露其内部的结构。</li>
</ol>
</li>
<li>迭代器模式的原理类图</li>
</ul>
<p><img src="https://gitee.com/tan2511217211/PicBed/raw/master/images/image-20210928162918581.png" alt="image-20210928162918581"></p>
<ul>
<li>对原理类图的说明-即(迭代器模式的角色及职责)<ol>
<li>Iterator :迭代器接口，是系统提供，含义hasNext, next, remove</li>
<li>Concretelterator:具体的迭代器类，管理迭代</li>
<li>Aggregate :一个统一的聚合接口，将客户端和具体聚合解耦</li>
<li>ConcreteAggreage :具体的聚合持有对象集合，并提供一个方法，返回一个迭代器，该迭代器可以正确遍历集合</li>
<li>Client :客户端，通过Iterator和Aggregate 依赖子类</li>
</ol>
</li>
<li>迭代器模式的注意事项和细节<ul>
<li>优点<ol>
<li>提供一个统一的方法遍历对象，客户不用再考虑聚合的类型，使用一种方法就可以遍历对象了。</li>
</ol>
<ol start="2">
<li>   隐藏了聚合的内部结构，客户端要遍历聚合的时候只能取到迭代器，而不会知道聚合的具体组成。</li>
<li>   提供了一种设计思想，就是一个类应该只有一个引起变化的原因（叫做单一责任原则）。在聚合类中，我们把迭代器分开，就是要把管理对象集合和遍历对象集合的责任分开，这样一来集合改变的话，只影响到聚合对象。而如果遍历方式改变的话，只影响到了迭代器。</li>
<li>   当要展示一组相似对象，或者遍历一组相同对象时使用, 适合使用迭代器模式</li>
</ol>
</li>
<li>缺点<ol>
<li>每个聚合对象都要一个迭代器，会生成多个迭代器不好管理类</li>
</ol>
</li>
</ul>
</li>
</ul>
<h3 id="观察者模式"><a href="#观察者模式" class="headerlink" title="观察者模式"></a>观察者模式</h3><ul>
<li><p>基本介绍</p>
<p>观察者模式：对象之间多对一依赖的一种设计方案，被依赖的对象为Subject，依赖的对象为Observer，Subject通知Observer变化,比如这里的奶站是Subject，是1的一方。用户时Observer，是多的一方。</p>
</li>
<li><p>观察者模式原理</p>
<ul>
<li><p>观察者模式类似订牛奶业务</p>
<ol>
<li>奶站/气象局：Subject</li>
<li>用户/第三方网站：Observer</li>
</ol>
<p><img src="https://gitee.com/tan2511217211/PicBed/raw/master/images/image-20210929085513241.png" alt="image-20210929085513241"></p>
</li>
<li><p>Subject：登记注册、移除和通知</p>
<ol>
<li>registerObserver 注册</li>
<li>removeObserver 移除</li>
<li>notifyObservers() 通知所有的注册的用户，根据不同需求，可以是更新数据，让用户来取，也可能是实施推送，看具体需求定</li>
<li>Observer：接收输入</li>
</ol>
<p><img src="https://gitee.com/tan2511217211/PicBed/raw/master/images/image-20210929085527412.png" alt="image-20210929085527412"></p>
</li>
<li><p>思路分析图解(类图)</p>
</li>
</ul>
<p><img src="https://gitee.com/tan2511217211/PicBed/raw/master/images/image-20210929085607045.png" alt="image-20210929085607045"></p>
</li>
</ul>
<h3 id="中介者模式"><a href="#中介者模式" class="headerlink" title="中介者模式"></a>中介者模式</h3><ul>
<li><p>基本介绍</p>
<ol>
<li>中介者模式（Mediator Pattern），用一个中介对象来封装一系列的对象交互。中介者使各个对象不需要显式地相互引用，从而使其耦合松散，而且可以独立地改变它们之间的交互</li>
</ol>
<ol start="2">
<li>   中介者模式属于行为型模式，使代码易于维护</li>
<li>   比如MVC模式，C（Controller控制器）是M（Model模型）和V（View视图）的中介者，在前后端交互时起到了中间人的作用</li>
</ol>
</li>
<li><p>中介者模式的原理类图</p>
<p><img src="https://gitee.com/tan2511217211/PicBed/raw/master/images/image-20210929102215528.png" alt="image-20210929102215528"></p>
<ul>
<li>对原理类图的说明-即(中介者模式的角色及职责)<ol>
<li>Mediator就是抽象中介者,定义了同事对象到中介者对象的接口</li>
<li>Colleague是抽象同事类</li>
<li>ConcreteMediator 具体的中介者对象，实现抽象方法，他需要知道所有的具体的同事类,即以一个集合来管理HashMap,并接受某个同事对象消息，完成相应的任务</li>
<li>ConcreteColleague具体的同事类，会有很多,每个同事只知道自己的行为，而不了解其他同事类的行为(方法)，但是他们都依赖中介者对象</li>
</ol>
</li>
</ul>
</li>
<li><p>中介者模式的注意事项和细节</p>
<ol>
<li>多个类相互耦合，会形成网状结构, 使用中介者模式将网状结构分离为星型结构，进行解耦</li>
</ol>
<ol start="2">
<li>   减少类间依赖，降低了耦合，符合迪米特原则</li>
<li>   中介者承担了较多的责任，一旦中介者出现了问题，整个系统就会受到影响</li>
<li>   如果设计不当，中介者对象本身变得过于复杂，这点在实际使用时，要特别注意</li>
</ol>
</li>
</ul>
<h3 id="备忘录模式"><a href="#备忘录模式" class="headerlink" title="备忘录模式"></a>备忘录模式</h3><ul>
<li>基本介绍<ol>
<li>备忘录模式（Memento Pattern）在不破坏封装性的前提下，捕获一个对象的内部状态，并在该对象之外保存这个状态。这样以后就可将该对象恢复到原先保存的状态</li>
</ol>
<ol start="2">
<li>   可以这里理解备忘录模式：现实生活中的备忘录是用来记录某些要去做的事情，或者是记录已经达成的共同意见的事情，以防忘记了。而在软件层面，备忘录模式有着相同的含义，备忘录对象主要用来记录一个对象的某种状态，或者某些数据，当要做回退时，可以从备忘录对象里获取原来的数据进行恢复操作</li>
<li>   备忘录模式属于行为型模式</li>
</ol>
</li>
<li>备忘录模式的原理类图</li>
</ul>
<p><img src="https://gitee.com/tan2511217211/PicBed/raw/master/images/image-20210929113937563.png" alt="image-20210929113937563"></p>
<ul>
<li>对原理类图的说明-即(备忘录模式的角色及职责)<ol>
<li>originator : 对象(需要保存状态的对象)</li>
<li>Memento ： 备忘录对象,负责保存好记录，即Originator内部状态</li>
</ol>
<ol start="3">
<li>   Caretaker: 守护者对象,负责保存多个备忘录对象， 使用集合管理，提高效率</li>
<li>   说明：如果希望保存多个originator对象的不同时间的状态，也可以，只需要要 HashMap &lt;String, 集合&gt;</li>
</ol>
</li>
<li>备忘录模式的注意事项和细节<ol>
<li>给用户提供了一种可以恢复状态的机制，可以使用户能够比较方便地回到某个历史的状态</li>
</ol>
<ol start="2">
<li>   实现了信息的封装，使得用户不需要关心状态的保存细节</li>
<li>   如果类的成员变量过多，势必会占用比较大的资源，而且每一次保存都会消耗一定的内存, 这个需要注意</li>
<li>   适用的应用场景：1、后悔药。 2、打游戏时的存档。 3、Windows 里的 ctri + z。 4、IE 中的后退。 4、数据库的事务管理</li>
<li>   为了节约内存，备忘录模式可以和原型模式配合使用</li>
</ol>
</li>
</ul>
<h3 id="解释器模式"><a href="#解释器模式" class="headerlink" title="解释器模式"></a>解释器模式</h3><ul>
<li>基本介绍<ol>
<li>在编译原理中，一个算术表达式通过词法分析器形成词法单元，而后这些词法单元再通过语法分析器构建语法分析树，最终形成一颗抽象的语法分析树。这里的词法分析器和语法分析器都可以看做是解释器</li>
<li>解释器模式（Interpreter Pattern）：是指给定一个语言(表达式)，定义它的文法的一种表示，并定义一个解释器，使用该解释器来解释语言中的句子(表达式)</li>
<li>应用场景<ul>
<li>应用可以将一个需要解释执行的语言中的句子表示为一个抽象语法树</li>
<li>一些重复出现的问题可以用一种简单的语言来表达</li>
<li>一个简单语法需要解释的场景</li>
</ul>
</li>
<li>这样的例子还有，比如编译器、运算表达式计算、正则表达式、机器人等</li>
</ol>
</li>
<li>解释器模式的原理类图</li>
</ul>
<p><img src="https://gitee.com/tan2511217211/PicBed/raw/master/images/image-20210929135821763.png" alt="image-20210929135821763"></p>
<ul>
<li>对原理类图的说明-即(解释器模式的角色及职责)<ol>
<li>Context: 是环境角色,含有解释器之外的全局信息.</li>
</ol>
<ol start="2">
<li>   AbstractExpression: 抽象表达式， 声明一个抽象的解释操作,这个方法为抽象语法树中所有的节点所共享</li>
<li>   TerminalExpression: 为终结符表达式, 实现与文法中的终结符相关的解释操作</li>
<li>   NonTermialExpression: 为非终结符表达式，为文法中的非终结符实现解释操作.</li>
<li>   说明： 输入Context he TerminalExpression 信息通过Client 输入即可</li>
</ol>
</li>
<li>解释器模式的注意事项和细节<ol>
<li>当有一个语言需要解释执行，可将该语言中的句子表示为一个抽象语法树，就可以考虑使用解释器模式，让程序具有良好的扩展性</li>
</ol>
<ol start="2">
<li>   应用场景：编译器、运算表达式计算、正则表达式、机器人等</li>
<li>   使用解释器可能带来的问题：解释器模式会引起类膨胀、解释器模式采用递归调用方法，将会导致调试非常复杂、效率可能降低</li>
</ol>
</li>
</ul>
<h3 id="状态模式"><a href="#状态模式" class="headerlink" title="状态模式"></a>状态模式</h3><ul>
<li>基本介绍<ol>
<li>状态模式（State Pattern）：它主要用来解决对象在多种状态转换时，需要对外输出不同的行为的问题。状态和行为是一一对应的，状态之间可以相互转换</li>
</ol>
<ol start="2">
<li>   当一个对象的内在状态改变时，允许改变其行为，这个对象看起来像是改变了其类</li>
</ol>
</li>
<li>状态模式的原理类图</li>
</ul>
<p><img src="https://gitee.com/tan2511217211/PicBed/raw/master/images/image-20210930083715769.png" alt="image-20210930083715769"></p>
<ul>
<li>对原理类图的说明-即(状态模式的角色及职责)<ol>
<li>Context 类为环境角色, 用于维护State实例,这个实例定义当前状态</li>
</ol>
<ol start="2">
<li>   State 是抽象状态角色,定义一个接口封装与Context 的一个特点接口相关行为</li>
<li>   ConcreteState 具体的状态角色，每个子类实现一个与Context 的一个状态相关行为</li>
</ol>
</li>
<li>状态模式的注意事项和细节<ol>
<li>代码有很强的可读性。状态模式将每个状态的行为封装到对应的一个类中</li>
</ol>
<ol start="2">
<li>   方便维护。将容易产生问题的if-else语句删除了，如果把每个状态的行为都放到一个类中，每次调用方法时都要判断当前是什么状态，不但会产出很多if-else语句，而且容易出错</li>
<li>   符合“开闭原则”。容易增删状态</li>
<li>   会产生很多类。每个状态都要一个对应的类，当状态过多时会产生很多类，加大维护难度</li>
<li>   应用场景：当一个事件或者对象有很多种状态，状态之间会相互转换，对不同的状态要求有不同的行为的时候，可以考虑使用状态模式</li>
</ol>
</li>
</ul>
<h3 id="策略模式-1"><a href="#策略模式-1" class="headerlink" title="策略模式"></a>策略模式</h3><ul>
<li>基本介绍<ol>
<li>策略模式（Strategy Pattern）中，定义算法族，分别封装起来，让他们之间可以互相替换，此模式让算法的变化独立于使用算法的客户</li>
</ol>
<ol start="2">
<li>   这算法体现了几个设计原则，第一、把变化的代码从不变的代码中分离出来；第二、针对接口编程而不是具体类（定义了策略接口）；第三、多用组合/聚合，少用继承（客户通过组合方式使用策略）</li>
</ol>
</li>
<li>策略模式的原理类图</li>
</ul>
<p><img src="https://gitee.com/tan2511217211/PicBed/raw/master/images/image-20210930083901577.png" alt="image-20210930083901577"></p>
<p>从上图可以看到，客户context 有成员变量strategy或者其他的策略接口 ,至于需要使用到哪个策略，我们可以在构造器中指定</p>
<ul>
<li>策略模式的注意事项和细节<ol>
<li>策略模式的关键是：分析项目中变化部分与不变部分</li>
</ol>
<ol start="2">
<li>   策略模式的核心思想是：多用组合/聚合 少用继承；用行为类组合，而不是行为的继承。更有弹性</li>
<li>   体现了“对修改关闭，对扩展开放”原则，客户端增加行为不用修改原有代码，只要添加一种策略（或者行为）即可，避免了使用多重转移语句（if..else if..else）</li>
<li>   提供了可以替换继承关系的办法： 策略模式将算法封装在独立的Strategy类中使得你可以独立于其Context改变它，使它易于切换、易于理解、易于扩展</li>
<li>   需要注意的是：每添加一个策略就要增加一个类，当策略过多是会导致类数目庞大</li>
</ol>
</li>
</ul>
<h3 id="职责链模式"><a href="#职责链模式" class="headerlink" title="职责链模式"></a>职责链模式</h3><ul>
<li><p>基本介绍</p>
<ol>
<li><p>职责链模式（Chain of Responsibility Pattern）,又叫责任链模式，为请求创建了一个接收者对象的链(简单示意图)。这种模式对请求的发送者和接收者进行解耦。</p>
<p><img src="https://gitee.com/tan2511217211/PicBed/raw/master/images/image-20210930084056371.png" alt="image-20210930084056371"></p>
</li>
<li><p>职责链模式通常每个接收者都包含对另一个接收者的引用。如果一个对象不能处理该请求，那么它会把相同的请求传给下一个接收者，依此类推。</p>
</li>
<li><p>这种类型的设计模式属于行为型模式</p>
</li>
</ol>
</li>
<li><p>职责链模式的原理类图</p>
</li>
</ul>
<p><img src="https://gitee.com/tan2511217211/PicBed/raw/master/images/image-20210930084141204.png" alt="image-20210930084141204"></p>
<p>职责链模式（Chain Of Responsibility），使多个对象都有机会处理请求，从而避免请求的发送者和接收者之间的耦合关系。将这个对象连成一条链，并沿着这条链传递该请求，直到有一个对象处理它为止。</p>
<ul>
<li>对原理类图的说明-即(职责链模式的角色及职责)<ol>
<li>Handler : 抽象的处理者, 定义了一个处理请求的接口, 同时含义另外Handler</li>
</ol>
<ol start="2">
<li>   ConcreteHandlerA , B 是具体的处理者, 处理它自己负责的请求， 可以访问它的后继者(即下一个处理者), 如果可以处理当前请求，则处理，否则就将该请求交个 后继者去处理，从而形成一个职责链</li>
<li>   Request ， 含义很多属性，表示一个请求</li>
</ol>
</li>
<li>职责链模式的注意事项和细节<ol>
<li>将请求和处理分开，实现解耦，提高系统的灵活性</li>
</ol>
<ol start="2">
<li>   简化了对象，使对象不需要知道链的结构</li>
<li>   性能会受到影响，特别是在链比较长的时候，因此需控制链中最大节点数量，一般通过在Handler中设置一个最大节点数量，在setNext()方法中判断是否已经超过阀值，超过则不允许该链建立，避免出现超长链无意识地破坏系统性能</li>
<li>   调试不方便。采用了类似递归的方式，调试时逻辑可能比较复杂</li>
<li>   最佳应用场景：有多个对象可以处理同一个请求时，比如：多级请求、请假/加薪等审批流程、Java Web中Tomcat对Encoding的处理、拦截器</li>
</ol>
</li>
</ul>

                
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">tan</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章链接:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://blog.qinw.top/posts/a2d2.html">https://blog.qinw.top/posts/a2d2.html</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by-nd/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY-ND 4.0</a>
                    许可协议。转载请注明来源
                    <a href="https://blog.qinw.top" target="_blank">tan</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">
                                    <span class="chip bg-color">设计模式</span>
                                </a>
                            
                                <a href="/tags/%E7%AC%94%E8%AE%B0/">
                                    <span class="chip bg-color">笔记</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/tanqw/tanqw.github.io/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="https://cdn.jsdelivr.net/gh/tanqw/tanqw.github.io/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
                <style>
    #reward {
        margin: 40px 0;
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.4rem;
        line-height: 38px;
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .close:hover {
        color: #ef5350;
        transform: scale(1.3);
        -moz-transform:scale(1.3);
        -webkit-transform:scale(1.3);
        -o-transform:scale(1.3);
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-content ul {
        padding-left: 0 !important;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        background-color: #ccc;
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff !important;
        background-color: #22AB38 !important;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff !important;
        background-color: #019FE8 !important;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">你的赏识是我前进的动力</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="https://cdn.jsdelivr.net/gh/tanqw/tanqw.github.io/medias/reward/alipay.png" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                    <div id="wechat">
                        <img src="https://cdn.jsdelivr.net/gh/tanqw/tanqw.github.io/medias/reward/wechat.png" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>

            
        </div>
    </div>

    

    

    

    

    
        <style>
    .valine-card {
        margin: 1.5rem auto;
    }

    .valine-card .card-content {
        padding: 20px 20px 5px 20px;
    }

    #vcomments textarea {
        box-sizing: border-box;
        background: url("/medias/comment_bg.png") 100% 100% no-repeat;
    }

    #vcomments p {
        margin: 2px 2px 10px;
        font-size: 1.05rem;
        line-height: 1.78rem;
    }

    #vcomments blockquote p {
        text-indent: 0.2rem;
    }

    #vcomments a {
        padding: 0 2px;
        color: #4cbf30;
        font-weight: 500;
        text-decoration: none;
    }

    #vcomments img {
        max-width: 100%;
        height: auto;
        cursor: pointer;
    }

    #vcomments ol li {
        list-style-type: decimal;
    }

    #vcomments ol,
    ul {
        display: block;
        padding-left: 2em;
        word-spacing: 0.05rem;
    }

    #vcomments ul li,
    ol li {
        display: list-item;
        line-height: 1.8rem;
        font-size: 1rem;
    }

    #vcomments ul li {
        list-style-type: disc;
    }

    #vcomments ul ul li {
        list-style-type: circle;
    }

    #vcomments table, th, td {
        padding: 12px 13px;
        border: 1px solid #dfe2e5;
    }

    #vcomments table, th, td {
        border: 0;
    }

    table tr:nth-child(2n), thead {
        background-color: #fafafa;
    }

    #vcomments table th {
        background-color: #f2f2f2;
        min-width: 80px;
    }

    #vcomments table td {
        min-width: 80px;
    }

    #vcomments h1 {
        font-size: 1.85rem;
        font-weight: bold;
        line-height: 2.2rem;
    }

    #vcomments h2 {
        font-size: 1.65rem;
        font-weight: bold;
        line-height: 1.9rem;
    }

    #vcomments h3 {
        font-size: 1.45rem;
        font-weight: bold;
        line-height: 1.7rem;
    }

    #vcomments h4 {
        font-size: 1.25rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    #vcomments h5 {
        font-size: 1.1rem;
        font-weight: bold;
        line-height: 1.4rem;
    }

    #vcomments h6 {
        font-size: 1rem;
        line-height: 1.3rem;
    }

    #vcomments p {
        font-size: 1rem;
        line-height: 1.5rem;
    }

    #vcomments hr {
        margin: 12px 0;
        border: 0;
        border-top: 1px solid #ccc;
    }

    #vcomments blockquote {
        margin: 15px 0;
        border-left: 5px solid #42b983;
        padding: 1rem 0.8rem 0.3rem 0.8rem;
        color: #666;
        background-color: rgba(66, 185, 131, .1);
    }

    #vcomments pre {
        font-family: monospace, monospace;
        padding: 1.2em;
        margin: .5em 0;
        background: #272822;
        overflow: auto;
        border-radius: 0.3em;
        tab-size: 4;
    }

    #vcomments code {
        font-family: monospace, monospace;
        padding: 1px 3px;
        font-size: 0.92rem;
        color: #e96900;
        background-color: #f8f8f8;
        border-radius: 2px;
    }

    #vcomments pre code {
        font-family: monospace, monospace;
        padding: 0;
        color: #e8eaf6;
        background-color: #272822;
    }

    #vcomments pre[class*="language-"] {
        padding: 1.2em;
        margin: .5em 0;
    }

    #vcomments code[class*="language-"],
    pre[class*="language-"] {
        color: #e8eaf6;
    }

    #vcomments [type="checkbox"]:not(:checked), [type="checkbox"]:checked {
        position: inherit;
        margin-left: -1.3rem;
        margin-right: 0.4rem;
        margin-top: -1px;
        vertical-align: middle;
        left: unset;
        visibility: visible;
    }

    #vcomments b,
    strong {
        font-weight: bold;
    }

    #vcomments dfn {
        font-style: italic;
    }

    #vcomments small {
        font-size: 85%;
    }

    #vcomments cite {
        font-style: normal;
    }

    #vcomments mark {
        background-color: #fcf8e3;
        padding: .2em;
    }

    #vcomments table, th, td {
        padding: 12px 13px;
        border: 1px solid #dfe2e5;
    }

    table tr:nth-child(2n), thead {
        background-color: #fafafa;
    }

    #vcomments table th {
        background-color: #f2f2f2;
        min-width: 80px;
    }

    #vcomments table td {
        min-width: 80px;
    }

    #vcomments [type="checkbox"]:not(:checked), [type="checkbox"]:checked {
        position: inherit;
        margin-left: -1.3rem;
        margin-right: 0.4rem;
        margin-top: -1px;
        vertical-align: middle;
        left: unset;
        visibility: visible;
    }
</style>

<div class="card valine-card" data-aos="fade-up">
    <div class="comment_headling" style="font-size: 20px; font-weight: 700; position: relative; padding-left: 20px; top: 15px; padding-bottom: 5px;">
        <i class="fas fa-comments fa-fw" aria-hidden="true"></i>
        <span>评论</span>
    </div>
    <div id="vcomments" class="card-content" style="display: grid">
    </div>
</div>

<script src="https://cdn.jsdelivr.net/gh/tanqw/tanqw.github.io/libs/valine/av-min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/tanqw/tanqw.github.io/libs/valine/Valine.min.js"></script>
<script>
    new Valine({
        el: '#vcomments',
        appId: 'XFbtY975xK56Y5el7OjiDgu6-gzGzoHsz',
        appKey: 'PAiGnxhnStYja1QL7dpJ8hy5',
        notify: 'false' === 'true',
        verify: 'false' === 'true',
        visitor: 'true' === 'true',
        avatar: 'mm',
        pageSize: '10',
        lang: 'zh-cn',
        placeholder: 'just go go'
    });
</script>

<!--酷Q推送-->


    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/posts/4818.html">
                    <div class="card-image">
                        
                        
                        <img src="https://cdn.jsdelivr.net/gh/tanqw/tanqw.github.io/medias/featureimages/23.jpg" class="responsive-img" alt="爬虫爬取淘宝商品信息">
                        
                        <span class="card-title">爬虫爬取淘宝商品信息</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2021-09-16
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/%E7%88%AC%E8%99%AB/" class="post-category">
                                    爬虫
                                </a>
                            
                            <a href="/categories/%E7%88%AC%E8%99%AB/Python/" class="post-category">
                                    Python
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/%E7%88%AC%E8%99%AB/">
                        <span class="chip bg-color">爬虫</span>
                    </a>
                    
                    <a href="/tags/Python/">
                        <span class="chip bg-color">Python</span>
                    </a>
                    
                    <a href="/tags/%E6%B7%98%E5%AE%9D/">
                        <span class="chip bg-color">淘宝</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                本篇&nbsp;<i class="far fa-dot-circle"></i>
            </div>
            <div class="card">
                <a href="/posts/a2d2.html">
                    <div class="card-image">
                        
                        
                        <img src="https://cdn.jsdelivr.net/gh/tanqw/tanqw.github.io/medias/featureimages/17.jpg" class="responsive-img" alt="设计模式">
                        
                        <span class="card-title">设计模式</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2021-09-16
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" class="post-category">
                                    设计模式
                                </a>
                            
                            
                        </span>
                    </div>
                </div>

                
                <div class="card-action article-tags">
                    
                    <a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">
                        <span class="chip bg-color">设计模式</span>
                    </a>
                    
                    <a href="/tags/%E7%AC%94%E8%AE%B0/">
                        <span class="chip bg-color">笔记</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>


<script>
    $('#articleContent').on('copy', function (e) {
        // IE8 or earlier browser is 'undefined'
        if (typeof window.getSelection === 'undefined') return;

        var selection = window.getSelection();
        // if the selection is short let's not annoy our users.
        if (('' + selection).length < Number.parseInt('120')) {
            return;
        }

        // create a div outside of the visible area and fill it with the selected text.
        var bodyElement = document.getElementsByTagName('body')[0];
        var newdiv = document.createElement('div');
        newdiv.style.position = 'absolute';
        newdiv.style.left = '-99999px';
        bodyElement.appendChild(newdiv);
        newdiv.appendChild(selection.getRangeAt(0).cloneContents());

        // we need a <pre> tag workaround.
        // otherwise the text inside "pre" loses all the line breaks!
        if (selection.getRangeAt(0).commonAncestorContainer.nodeName === 'PRE' || selection.getRangeAt(0).commonAncestorContainer.nodeName === 'CODE') {
            newdiv.innerHTML = "<pre>" + newdiv.innerHTML + "</pre>";
        }

        var url = document.location.href;
        newdiv.innerHTML += '<br />'
            + '来源: Tan<br />'
            + '文章作者: Tan<br />'
            + '文章链接: <a href="' + url + '">' + url + '</a><br />'
            + '本文章著作权归作者所有，任何形式的转载都请注明出处。';

        selection.selectAllChildren(newdiv);
        window.setTimeout(function () {bodyElement.removeChild(newdiv);}, 200);
    });
</script>


<!-- 代码块功能依赖 -->
<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/tanqw/tanqw.github.io/libs/codeBlock/codeBlockFuction.js"></script>

<!-- 代码语言 -->

<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/tanqw/tanqw.github.io/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/tanqw/tanqw.github.io/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/tanqw/tanqw.github.io/libs/codeBlock/codeShrink.js"></script>


    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget card" style="background-color: white;">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="https://cdn.jsdelivr.net/gh/tanqw/tanqw.github.io/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>




    <footer class="page-footer bg-color">
    
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/tanqw/tanqw.github.io/libs/aplayer/APlayer.min.css">
<style>
    .aplayer .aplayer-lrc p {
        
        display: none;
        
        font-size: 12px;
        font-weight: 700;
        line-height: 16px !important;
    }

    .aplayer .aplayer-lrc p.aplayer-lrc-current {
        
        display: none;
        
        font-size: 15px;
        color: #42b983;
    }

    
</style>
<div class="">
    
    <div class="row">
        <meting-js class="col l8 offset-l2 m10 offset-m1 s12"
                   server="tencent"
                   type="playlist"
                   id="1551071404"
                   fixed='true'
                   autoplay='false'
                   theme='#42b983'
                   loop='all'
                   order='random'
                   preload='auto'
                   volume='0.7'
                   list-folded='false'
        >
        </meting-js>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/gh/tanqw/tanqw.github.io/libs/aplayer/APlayer.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script>

    

    <div class="container row center-align"
         style="margin-bottom: 15px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            
                <span id="year">2021</span>
            
            <span id="year">2021</span>
            <a href="/about" target="_blank">Tan</a>&nbsp;|&nbsp;
            
                &nbsp;<i class="fas fa-chart-area"></i>&nbsp;站点总字数:&nbsp;<span
                        class="white-color">21.8k</span>&nbsp;|&nbsp;
            
            
            
            
            

            <!-- 运行天数提醒. -->
            
                <!-- <span id="sitetime"> Loading ...</span>
                <script>
                    var calcSiteTime = function () {
                        var seconds = 1000;
                        var minutes = seconds * 60;
                        var hours = minutes * 60;
                        var days = hours * 24;
                        var years = days * 365;
                        var today = new Date();
                        var startYear = "2021";
                        var startMonth = "9";
                        var startDate = "14";
                        var startHour = "0";
                        var startMinute = "0";
                        var startSecond = "0";
                        var todayYear = today.getFullYear();
                        var todayMonth = today.getMonth() + 1;
                        var todayDate = today.getDate();
                        var todayHour = today.getHours();
                        var todayMinute = today.getMinutes();
                        var todaySecond = today.getSeconds();
                        var t1 = Date.UTC(startYear, startMonth, startDate, startHour, startMinute, startSecond);
                        var t2 = Date.UTC(todayYear, todayMonth, todayDate, todayHour, todayMinute, todaySecond);
                        var diff = t2 - t1;
                        var diffYears = Math.floor(diff / years);
                        var diffDays = Math.floor((diff / days) - diffYears * 365);

                        // 区分是否有年份.
                        var language = 'zh-CN';
                        if (startYear === String(todayYear)) {
                            document.getElementById("year").innerHTML = todayYear;
                            var daysTip = 'This site has been running for ' + diffDays + ' days';
                            if (language === 'zh-CN') {
                                daysTip = '本站已运行 ' + diffDays + ' 天';
                            } else if (language === 'zh-HK') {
                                daysTip = '本站已運行 ' + diffDays + ' 天';
                            }
                            document.getElementById("sitetime").innerHTML = daysTip;
                        } else {
                            document.getElementById("year").innerHTML = startYear + " - " + todayYear;
                            var yearsAndDaysTip = 'This site has been running for ' + diffYears + ' years and '
                                + diffDays + ' days';
                            if (language === 'zh-CN') {
                                yearsAndDaysTip = '本站已运行 ' + diffYears + ' 年 ' + diffDays + ' 天';
                            } else if (language === 'zh-HK') {
                                yearsAndDaysTip = '本站已運行 ' + diffYears + ' 年 ' + diffDays + ' 天';
                            }
                            document.getElementById("sitetime").innerHTML = yearsAndDaysTip;
                        }
                    } -->


                <span id="sitetime"> Loading ...</span>
                <script>
                    var calcSiteTime = function () {
                        var startTime = "2021-09-14 00:00:00";
                        var now_time = Date.parse(new Date());
                        var start_time = Date.parse(new Date(startTime));
                        var time_dis = now_time - start_time;

                        var days=Math.floor(time_dis/(24*3600*1000));
                        //计算出小时数
                        var leave1=time_dis%(24*3600*1000);//计算天数后剩余的毫秒数
                        var hours=Math.floor(leave1/(3600*1000));
                        //计算相差分钟数
                        var leave2=leave1%(3600*1000);//计算小时数后剩余的毫秒数
                        var minutes=Math.floor(leave2/(60*1000));
                        //计算相差秒数
                        var leave3=leave2%(60*1000);//计算小时数后剩余的毫秒数
                        var second = leave3/1000;
                        var days=Math.floor(time_dis/(24*3600*1000));
                        var year = days / 365;
                        var info = ''
                        if(year>0){
                            info = year +"年"+ (days - year * 365)+"天" + hours + "小时" + minutes + "分" + second + "秒";
                        }else{
                            info = days + "天" + hours + "小时" + minutes + "分" + second + "秒";
                        }

                        var language = 'zh-CN';
                            if (language === 'zh-CN') {
                                yearsAndDaysTip = '本站已运行 ' + days+"天"+hours+"小时"+minutes+"分"+second+"秒";
                            } else if (language === 'zh-HK') {
                                yearsAndDaysTip = '本站已運行 ' + days+"天"+hours+"小时"+minutes+"分"+second+"秒";
                            }
                            document.getElementById("sitetime").innerHTML = yearsAndDaysTip;
                    }
                    window.setInterval(function(){
                        calcSiteTime();
                        },1000);
                </script>
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link ">
    <a href="https://github.com/tanqw" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:tan2511217211@163.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>







    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=2511217211" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 2511217211" data-position="top" data-delay="50">
        <i class="fab fa-qq"></i>
    </a>







</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script type="text/javascript">
$(function () {
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    searchFunc('/search.xml', 'searchInput', 'searchResult');
});
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="https://cdn.jsdelivr.net/gh/tanqw/tanqw.github.io/libs/materialize/materialize.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/tanqw/tanqw.github.io/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/tanqw/tanqw.github.io/libs/aos/aos.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/tanqw/tanqw.github.io/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/tanqw/tanqw.github.io/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/tanqw/tanqw.github.io/js/matery.min.js"></script>
    <!-- <script src="/js/cursor.js"></script>
    <script src="/js/snow.js"></script> -->


    <script type="text/javascript">
        var OriginTitile = document.title,
            st;
        document.addEventListener("visibilitychange", function () {
            document.hidden ? (document.title = "看不见我~看不见我~", clearTimeout(st)) : (document.title =
                "(๑•̀ㅂ•́) ✧被发现了～", st = setTimeout(function () {
                    document.title = OriginTitile
                }, 3e3))
        })
    </script>


    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    

    

    
        <script>
            (function(i,s,o,g,r,a,m){i["DaoVoiceObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;a.charset="utf-8";m.parentNode.insertBefore(a,m)})(window,document,"script",('https:' == document.location.protocol ? 'https:' : 'http:') + "//widget.daovoice.io/widget/bf62abe0.js","daovoice")
            daovoice('init', {
            app_id: "bf62abe0"
        });
        daovoice('update');
        </script>
    <!-- <script>
        (function (i, s, o, g, r, a, m) {
            i["DaoVoiceObject"] = r;
            i[r] = i[r] || function () {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
            a = s.createElement(o), m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            a.charset = "utf-8";
            m.parentNode.insertBefore(a, m)
        })(window, document, "script", ('https:' == document.location.protocol ? 'https:' : 'http:') +
            "//widget.daovoice.io/widget/bf62abe0.js", "daovoice")
        daovoice('init', {
            app_id: "bf62abe0"
        });
        daovoice('update');
    </script> -->
    

    <!--腾讯兔小巢-->
    
    

    

    

    
    <script src="https://cdn.jsdelivr.net/gh/tanqw/tanqw.github.io/libs/instantpage/instantpage.min.js" type="module"></script>
    


        <script src="//cdn.jsdelivr.net/npm/js-base64/base64.min.js"></script>
        <script>
        const hasAttr = (e,a) => a.some(_=> e.attr(_)!==undefined);
        $('a').each(function() {
          const $this = $(this);
          if(hasAttr($this,["data-fancybox","ignore-external-link"])) return;
          const href = $this.attr('href');
          if (href && href.match('^((http|https|thunder|qqdl|ed2k|Flashget|qbrowser|ftp|rtsp|mms)://)')) {
            const strs = href.split('/');
            if (strs.length >= 3) {
                const host = strs[2];
                if (host !== 'blog.qinw.top' || window.location.host) {
                    $this.attr('href', '/go.html?u='+Base64.encode(href)+'').attr('rel', 'external nofollow noopener noreferrer');
                    if (true) {
                        $this.attr('target', '_blank');
                    }
                }
            }
          }
        });
        </script></body>

</html>
